<?php if(!$postings->isEmpty()): ?>
<?php $account = $postings->first()->account; ?>
<div class="text-center font-light">
	<b> <?php echo e(ucfirst(trans('reports.grand_livre') )); ?> </b>
	<strong class="text-green-800"><?php echo e(trans('account.account_number')); ?> : </strong><?php echo $account->account_number; ?>, 
	<strong class="text-green-800"><?php echo e(trans('account.entitled')); ?> :</strong> <?php echo $account->entitled; ?>, 
	<strong class="text-green-800"><?php echo e(trans('accounting_nature.account_nature')); ?> :</strong> <?php echo $account->account_nature; ?>, 
	<strong class="text-green-800"><?php echo e(trans('general.between')); ?> :</strong> <?php echo request()->segment(4); ?> <?php echo e(trans('general.and')); ?> <?php echo request()->segment(5); ?>

</center>
<hr/>
<table class="pure-table pure-table-bordered">
<caption class="text-gray-700 font-semibold text-2xl"> <?php echo e(trans('report.ledger')); ?> </caption>
	<thead>
		<tr>
			<th><?php echo e(trans('account.date')); ?></th>
			<th><?php echo e(trans('posting.transactionid')); ?></th>
			<th><?php echo e(trans('account.wording')); ?></th>
			<th><?php echo e(trans('account.debit')); ?></th>
			<th><?php echo e(trans('account.credit')); ?></th>
			<th><?php echo e(trans('account.balance')); ?></th>
		</tr>
	</thead>
	
   
     <?php if(in_array(strtolower($account->account_nature),['asset','expenditure'])): ?>
	<tbody>
		<tr>
			<th colspan="3"><?php echo e(trans('general.opening_balance')); ?></th>
			<th><?php echo e(moneyFormat($debits)); ?></th>
			<th><?php echo e(moneyFormat($credits)); ?></th>
			<th class="text-green-700"><?php echo e(moneyFormat($debits - $credits)); ?></th>
		</tr>

	<?php $totalDebit  = 0; ?>
	<?php $totalCrebit = 0; ?>
	<?php $balance     = $debits - $credits; ?>
	<?php $__empty_1 = true; foreach($postings as $posting): $__empty_1 = false; ?>
	<tr>
		<td><?php echo $posting->created_at->format('Y-m-d'); ?></td>
		<td><?php echo $posting->transactionid; ?></td>
		<td><?php echo $posting->wording; ?></td>
		<?php $totalDebit += abs($posting->debit_amount); ?>
		<?php $balance  += abs($posting->debit_amount);?>

		<?php $totalCrebit+= abs($posting->credit_amount); ?>
		<?php $balance  -= abs($posting->credit_amount);?>

		<td><?php echo number_format(abs($posting->debit_amount)); ?></td>
		<td><?php echo number_format(abs($posting->credit_amount)); ?></td>
		<td><?php echo number_format($balance); ?></td>
	</tr>
	<?php endforeach; if ($__empty_1): ?>
		<?php /* empty expr */ ?>
	<?php endif; ?>
	<tr>
			<th colspan="3"><b><?php echo e(trans('posting.movement_total')); ?>:</b></th>
			<th><?php echo number_format($totalDebit); ?></th>
			<th><?php echo number_format($totalCrebit); ?></th>
			<th><?php echo number_format($balance); ?></th>
		</tr>
	</tbody>
</table>

<?php elseif(in_array(strtolower($account->account_nature),['liabilities','income'])): ?>
	<tbody>
		<tr>
			<th colspan="3"><?php echo e(trans('general.opening_balance')); ?></th>
			<th><?php echo e(moneyFormat($debits)); ?></th>
			<th><?php echo e(moneyFormat($credits)); ?></th>
			<th class="text-green-700"><?php echo e(moneyFormat($credits - $debits)); ?></th>
		</tr>
	<?php $totalDebit  = 0; ?>
	<?php $totalCrebit = 0; ?>
	<?php $balance     = $credits - $debits; ?>
	<?php $__empty_1 = true; foreach($postings as $posting): $__empty_1 = false; ?>
	<tr>
		<td><?php echo $posting->created_at->format('Y-m-d'); ?></td>
		<td><?php echo $posting->transactionid; ?></td>
		<td><?php echo $posting->wording; ?></td>
		<?php $totalDebit += abs($posting->debit_amount); ?>
		<?php $balance  -= abs($posting->debit_amount);?>

		<?php $totalCrebit+= abs($posting->credit_amount); ?>
		<?php $balance  += abs($posting->credit_amount);?>

		<td><?php echo number_format(abs($posting->debit_amount)); ?></td>
		<td><?php echo number_format(abs($posting->credit_amount)); ?></td>
		<td><?php echo number_format(abs($balance)); ?></td>
	</tr>
	<?php endforeach; if ($__empty_1): ?>
		<?php /* empty expr */ ?>
	<?php endif; ?>
	<tr>
			<th colspan="3"><b><?php echo e(trans('posting.movement_total')); ?>:</b></th>
			<th><?php echo number_format($totalDebit); ?></th>
			<th><?php echo number_format($totalCrebit); ?></th>
			<th><?php echo number_format(abs($balance)); ?></th>
		</tr>
	</tbody>
</table>
<?php endif; ?>
<?php endif; ?>